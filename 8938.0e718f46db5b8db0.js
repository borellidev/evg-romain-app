(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8938],{8938:(we,ie,X)=>{"use strict";X.r(ie),X.d(ie,{HomePageModule:()=>he});var J=X(177),y=X(9364),U=X(4341),K=X(70),n=X(4438);let $=(()=>{var c;class f{constructor(){}ngOnInit(){}}return(c=f).\u0275fac=function(s){return new(s||c)},c.\u0275cmp=n.VBU({type:c,selectors:[["app-header"]],decls:4,vars:1,consts:[[3,"translucent"],["size","large"]],template:function(s,d){1&s&&(n.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),n.EFF(3,"EVG Romain - jeu de piste"),n.k0s()()()),2&s&&n.Y8G("translucent",!0)},dependencies:[y.eU,y.BC,y.ai]}),f})();var I=X(467),M=X(119),A=X.n(M);const j={SecureStorage:"ionicSecureStorage",IndexedDB:A().INDEXEDDB,LocalStorage:A().LOCALSTORAGE},_={name:"_ionicstorage",storeName:"_ionickv",dbKey:"_ionickey",driverOrder:[j.SecureStorage,j.IndexedDB,j.LocalStorage]};class S{constructor(f=_){this._db=null,this._secureStorageDriver=null;const p=Object.assign({},_,f||{});this._config=p}create(){var f=this;return(0,I.A)(function*(){const p=A().createInstance(f._config);return f._db=p,yield p.setDriver(f._config.driverOrder||[]),f})()}defineDriver(f){var p=this;return(0,I.A)(function*(){return f._driver===j.SecureStorage&&(p._secureStorageDriver=f),A().defineDriver(f)})()}get driver(){var f;return(null===(f=this._db)||void 0===f?void 0:f.driver())||null}assertDb(){if(!this._db)throw new Error("Database not created. Must call create() first");return this._db}get(f){return this.assertDb().getItem(f)}set(f,p){return this.assertDb().setItem(f,p)}remove(f){return this.assertDb().removeItem(f)}clear(){return this.assertDb().clear()}length(){return this.assertDb().length()}keys(){return this.assertDb().keys()}forEach(f){return this.assertDb().iterate(f)}setEncryptionKey(f){var p;if(!this._secureStorageDriver)throw new Error("@ionic-enterprise/secure-storage not installed. Encryption support not available");null===(p=this._secureStorageDriver)||void 0===p||p.setEncryptionKey(f)}}let L=(()=>{var c;class f{constructor(){this.guestsList=[{name:"geoffrey",readleFound:!1,readler:!0,position:6},{name:"yves",readleFound:!1,readler:!0,position:3},{name:"matthieu",readleFound:!1,readler:!0,position:0},{name:"theo",readleFound:!1,readler:!0,position:7},{name:"kevin",readleFound:!1,readler:!0,position:2},{name:"godefroi",readleFound:!1,readler:!0,position:8},{name:"fred",readleFound:!1,readler:!0,position:4},{name:"jacques-louis",readleFound:!1,readler:!0,position:1},{name:"romain",readleFound:!1,readler:!1,position:5}]}}return(c=f).\u0275fac=function(s){return new(s||c)},c.\u0275prov=n.jDH({token:c,factory:c.\u0275fac,providedIn:"root"}),f})();function O(c,f){if(1&c){const p=n.RV6();n.j41(0,"ion-item")(1,"ion-checkbox",6,0),n.bIt("ionChange",function(){const d=n.eBV(p).$implicit,C=n.sdS(2),G=n.XpG();return n.Njj(G.setFcState(d,C.checked))}),n.EFF(3),n.nI1(4,"titlecase"),n.k0s()()}if(2&c){const p=f.$implicit;n.R7$(),n.Y8G("checked",p.readleFound),n.R7$(2),n.JRh(n.bMT(4,2,p.name))}}function W(c,f){if(1&c&&(n.j41(0,"ion-text"),n.EFF(1),n.k0s()),2&c){const p=n.XpG();n.R7$(),n.Lme(" R\xe9ussites : ",p.getAchivedChallenges()," / ",p.friendsChallengeList.length," ")}}let k=(()=>{var c;class f{constructor(s,d){this._loadingCtrl=s,this._guestService=d,this.store=new S,this.sqlFriendsChallengeList="friendsChallengeList"}ngOnInit(){var s=this;return(0,I.A)(function*(){yield s.store.create(),s.friendsChallengeList=yield s.store.get(s.sqlFriendsChallengeList),s.friendsChallengeList?s._guestService.guestsList=s.friendsChallengeList:yield s.store.set(s.sqlFriendsChallengeList,s._guestService.guestsList),s.friendsChallengeList=yield s.store.get(s.sqlFriendsChallengeList),s.friendsChallengeList=s.friendsChallengeList.filter(d=>d.readler)})()}getAchivedChallenges(){return this.friendsChallengeList.filter(s=>s.readleFound).length}setFcState(s,d){var C=this;return(0,I.A)(function*(){s.readleFound=d;const G=yield C._loadingCtrl.create({message:"Enregistrement..."});G.present(),yield C.store.set(C.sqlFriendsChallengeList,C.friendsChallengeList),G.dismiss()})()}}return(c=f).\u0275fac=function(s){return new(s||c)(n.rXU(y.Xi),n.rXU(L))},c.\u0275cmp=n.VBU({type:c,selectors:[["app-score"]],decls:9,vars:2,consts:[["checkbox",""],["value","first"],["slot","header","color","light"],["slot","content",1,"ion-padding"],[4,"ngFor","ngForOf"],[4,"ngIf"],["labelPlacement","start",3,"ionChange","checked"]],template:function(s,d){1&s&&(n.j41(0,"ion-accordion-group")(1,"ion-accordion",1)(2,"ion-item",2)(3,"ion-label"),n.EFF(4,"Tableau des scores"),n.k0s()(),n.j41(5,"div",3)(6,"ion-list"),n.DNE(7,O,5,4,"ion-item",4),n.k0s(),n.DNE(8,W,2,2,"ion-text",5),n.k0s()()()),2&s&&(n.R7$(7),n.Y8G("ngForOf",d.friendsChallengeList),n.R7$(),n.Y8G("ngIf",d.friendsChallengeList))},dependencies:[J.Sq,J.bT,y.xk,y.YH,y.eY,y.uz,y.he,y.nf,y.IO,y.hB,J.PV]}),f})(),V=(()=>{var c;class f{constructor(){this.store=new S,this.sqlResultats="resultats",this.getResultats()}getResultats(){var s=this;return(0,I.A)(function*(){yield s.store.create(),s.resultats=yield s.store.get(s.sqlResultats),s.resultats||(s.resultats=[{id:"symbole_1",state:!1},{id:"corpus",state:!1},{id:"chaine_1",state:!1},{id:"chaine_2",state:!1}],s.store.set(s.sqlResultats,s.resultats)),console.log(s.resultats)})()}validateLocker(s){var d=this;return(0,I.A)(function*(){d.resultats.find(C=>C.id===s).state=!0,d.store.set(d.sqlResultats,d.resultats)})()}}return(c=f).\u0275fac=function(s){return new(s||c)},c.\u0275prov=n.jDH({token:c,factory:c.\u0275fac,providedIn:"root"}),f})(),N=(()=>{var c;class f{constructor(s){this._modalController=s,this.closed=new n.bkB}close(){var s=this;return(0,I.A)(function*(){s.closed.emit(),yield s._modalController.dismiss()})()}}return(c=f).\u0275fac=function(s){return new(s||c)(n.rXU(y.W3))},c.\u0275cmp=n.VBU({type:c,selectors:[["app-locker-header"]],inputs:{label:"label"},outputs:{closed:"closed"},decls:6,vars:2,consts:[[3,"translucent"],["slot","start","color","danger","fill","clear",3,"click"],["slot","icon-only","name","close"]],template:function(s,d){1&s&&(n.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-button",1),n.bIt("click",function(){return d.close()}),n.nrm(3,"ion-icon",2),n.k0s(),n.j41(4,"ion-text"),n.EFF(5),n.k0s()()()),2&s&&(n.Y8G("translucent",!0),n.R7$(5),n.SpI("",d.label," "))},dependencies:[y.Jm,y.eU,y.iq,y.IO,y.ai]}),f})();function ae(c,f){if(1&c&&(n.j41(0,"ion-item")(1,"ion-label"),n.EFF(2),n.nI1(3,"titlecase"),n.k0s(),n.nrm(4,"ion-reorder",5),n.k0s()),2&c){const p=f.$implicit;n.R7$(2),n.SpI(" ",n.bMT(3,1,p.name)," ")}}let Z=(()=>{var c;class f{constructor(s,d,C){this._guestService=s,this._alertController=d,this._solutionService=C}ngOnInit(){this.guestsList=this._guestService.guestsList}handleReorder(s){this.guestsList=s.detail.complete(this.guestsList)}confirm(){var s=this;return(0,I.A)(function*(){s.guestsList.every((d,C)=>d.position===C)?((yield s._alertController.create({header:"c'est gagn\xe9 !"})).present(),s._solutionService.validateLocker(s.sqlId)):(yield s._alertController.create({header:"acc\xe8s refus\xe9"})).present()})()}}return(c=f).\u0275fac=function(s){return new(s||c)(n.rXU(L),n.rXU(y.hG),n.rXU(V))},c.\u0275cmp=n.VBU({type:c,selectors:[["app-ordered-list"]],decls:7,vars:2,consts:[["label","Bravo ! Mais c'\xe9tait facile, maintenant ordonne tout le monde"],[1,"ion-padding"],[3,"ionItemReorder","disabled"],[4,"ngFor","ngForOf"],["expand","block","color","success",3,"click"],["slot","end"]],template:function(s,d){1&s&&(n.nrm(0,"app-locker-header",0),n.j41(1,"ion-content",1)(2,"ion-list")(3,"ion-reorder-group",2),n.bIt("ionItemReorder",function(G){return d.handleReorder(G)}),n.DNE(4,ae,5,3,"ion-item",3),n.k0s()(),n.j41(5,"ion-button",4),n.bIt("click",function(){return d.confirm()}),n.EFF(6,"valider"),n.k0s()()),2&s&&(n.R7$(3),n.Y8G("disabled",!1),n.R7$(),n.Y8G("ngForOf",d.guestsList))},dependencies:[J.Sq,y.Jm,y.W9,y.uz,y.he,y.nf,y.UB,y.p$,N,J.PV]}),f})();function g(c,f){if(1&c){const p=n.RV6();n.j41(0,"ion-col",6)(1,"ion-button",7),n.bIt("click",function(){const d=n.eBV(p).index,C=n.XpG();return n.Njj(C.setValue(d,-1))}),n.nrm(2,"ion-icon",8),n.k0s()()}}function R(c,f){if(1&c&&(n.j41(0,"ion-col",6)(1,"div",9),n.EFF(2),n.k0s()()),2&c){const p=f.$implicit;n.R7$(2),n.SpI(" ",p," ")}}function E(c,f){if(1&c){const p=n.RV6();n.j41(0,"ion-col",6)(1,"ion-button",7),n.bIt("click",function(){const d=n.eBV(p).index,C=n.XpG();return n.Njj(C.setValue(d,1))}),n.nrm(2,"ion-icon",10),n.k0s()()}}let D=(()=>{var c;class f{constructor(s){this._modalController=s,this.resultats=[0,1,0,5]}ngOnInit(){this.reset()}reset(){this.values=[0,0,0,0]}setValue(s,d){this.values[s]=this.values[s]+d>=0&&this.values[s]+d<=9?this.values[s]+d:this.values[s]}verify(){var s=this;return(0,I.A)(function*(){s.values.every((d,C)=>d==s.resultats[C])&&(yield s._modalController.create({component:Z,initialBreakpoint:1,componentProps:{sqlId:s.sqlId}})).present()})()}}return(c=f).\u0275fac=function(s){return new(s||c)(n.rXU(y.W3))},c.\u0275cmp=n.VBU({type:c,selectors:[["app-numeric"]],decls:15,vars:3,consts:[["label","La bonne combinaison"],[1,"ion-padding"],["size","3",4,"ngFor","ngForOf"],["size","12"],["color","success","expand","block","size","large",3,"click"],["color","warning","expand","block","size","large",3,"click"],["size","3"],["expand","block","fill","outline",3,"click"],["slot","icon-only","name","remove"],[1,"numericValue"],["slot","icon-only","name","add"]],template:function(s,d){1&s&&(n.nrm(0,"app-locker-header",0),n.j41(1,"ion-content",1)(2,"ion-grid")(3,"ion-row"),n.DNE(4,g,3,0,"ion-col",2)(5,R,3,1,"ion-col",2)(6,E,3,0,"ion-col",2),n.k0s(),n.j41(7,"ion-row")(8,"ion-col",3)(9,"ion-button",4),n.bIt("click",function(){return d.verify()}),n.EFF(10,"Valider"),n.k0s()()(),n.j41(11,"ion-row")(12,"ion-col",3)(13,"ion-button",5),n.bIt("click",function(){return d.reset()}),n.EFF(14,"Remise \xe0 z\xe9ro"),n.k0s()()()()()),2&s&&(n.R7$(4),n.Y8G("ngForOf",d.values),n.R7$(),n.Y8G("ngForOf",d.values),n.R7$(),n.Y8G("ngForOf",d.values))},dependencies:[J.Sq,y.Jm,y.hU,y.W9,y.lO,y.iq,y.ln,N],styles:[".numericValue[_ngcontent-%COMP%]{text-align:center;font-size:6em}"]}),f})(),B=(()=>{var c;class f{constructor(s,d){this._alertController=s,this._solutionService=d,this.display=""}ngOnInit(){this.response.split("").forEach(s=>{this.display+=" "!==s?"-":s})}confirm(){var s=this;return(0,I.A)(function*(){var d;s.value.toLowerCase()===s.response.toLowerCase()?((yield s._alertController.create({header:null!==(d=s.clue)&&void 0!==d?d:"c'est gagn\xe9 !"})).present(),s._solutionService.validateLocker(s.sqlId)):(yield s._alertController.create({header:"Acc\xe8s refus\xe9"})).present()})()}setDisplay(){this.display="",this.response.split("").forEach(d=>{this.display+=" "!==d?"-":d});const s=this.display.slice(this.value.length);this.display=this.value+s}}return(c=f).\u0275fac=function(s){return new(s||c)(n.rXU(y.hG),n.rXU(V))},c.\u0275cmp=n.VBU({type:c,selectors:[["app-litteral"]],decls:8,vars:3,consts:[[3,"label"],[1,"ion-padding"],[3,"ngModelChange","ionInput","ngModel"],[1,"display"],["expand","block","color","success",3,"click"]],template:function(s,d){1&s&&(n.nrm(0,"app-locker-header",0),n.j41(1,"ion-content",1)(2,"ion-item")(3,"ion-input",2),n.mxI("ngModelChange",function(G){return n.DH7(d.value,G)||(d.value=G),G}),n.bIt("ionInput",function(){return d.setDisplay()}),n.k0s()(),n.j41(4,"div",3),n.EFF(5),n.k0s(),n.j41(6,"ion-button",4),n.bIt("click",function(){return d.confirm()}),n.EFF(7,"Confirmer"),n.k0s()()),2&s&&(n.Y8G("label",d.label),n.R7$(3),n.R50("ngModel",d.value),n.R7$(2),n.SpI(" ",d.display," "))},dependencies:[y.Jm,y.W9,y.$w,y.uz,y.Gw,U.BC,U.vS,N],styles:[".display[_ngcontent-%COMP%]{text-align:center;line-height:24px;letter-spacing:1em;font-size:24px;padding-top:32px;padding-bottom:32px}"]}),f})();function Y(c,f){if(1&c){const p=n.RV6();n.j41(0,"td")(1,"img",5),n.bIt("click",function(){const d=n.eBV(p).$implicit,C=n.XpG(2);return n.Njj(C.rotate(d))}),n.k0s()()}if(2&c){const p=f.$implicit;n.R7$(),n.xc7("transform","rotate("+p.rotate+"deg)"),n.Y8G("src","../../../../assets/img/"+p.imgSrc,n.B4B)}}function H(c,f){if(1&c&&(n.j41(0,"tr"),n.DNE(1,Y,2,3,"td",3),n.k0s()),2&c){const p=f.$implicit;n.R7$(),n.Y8G("ngForOf",p)}}let z=(()=>{var c;class f{constructor(s,d){this._alertController=s,this._solutionService=d,this.array=new Array,this.possibleRotate=[0,90,180,270]}ngOnInit(){for(let s=1;s<5;s++){const d=new Array;for(let C=1;C<5;C++){const G=4*(s-1)+C,me={imgSrc:`${G}.png`,rotate:this.getRotation(),rotatable:[1,4,6,7,10,11,13,16].includes(G)};d.push(me)}this.array.push(d)}console.log(this.array)}rotate(s){s.rotatable&&(s.rotate+=90,360===s.rotate&&(s.rotate=0))}getRotation(){const s=Math.floor(Math.random()*this.possibleRotate.length);return this.possibleRotate[s]}confirm(){var s=this;return(0,I.A)(function*(){s.array.every(d=>d.every(C=>C.rotatable&&0===C.rotate||!C.rotatable))?((yield s._alertController.create({header:s.clue})).present(),s._solutionService.validateLocker(s.sqlId)):(yield s._alertController.create({header:"acc\xe8s refus\xe9"})).present()})()}}return(c=f).\u0275fac=function(s){return new(s||c)(n.rXU(y.hG),n.rXU(V))},c.\u0275cmp=n.VBU({type:c,selectors:[["app-corpus"]],decls:6,vars:1,consts:[["label","Corpus"],[1,"ion-padding"],[1,"table"],[4,"ngFor","ngForOf"],["expand","block","color","success",3,"click"],["alt"," ",3,"click","src"]],template:function(s,d){1&s&&(n.nrm(0,"app-locker-header",0),n.j41(1,"ion-content",1)(2,"table",2),n.DNE(3,H,2,1,"tr",3),n.k0s(),n.j41(4,"ion-button",4),n.bIt("click",function(){return d.confirm()}),n.EFF(5,"confirmer"),n.k0s()()),2&s&&(n.R7$(3),n.Y8G("ngForOf",d.array))},dependencies:[J.Sq,y.Jm,y.W9,N],styles:[".table[_ngcontent-%COMP%]{width:100%}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{line-height:32px}"]}),f})();function Q(c,f){if(1&c){const p=n.RV6();n.j41(0,"ion-col",3)(1,"ion-button",4),n.bIt("click",function(){const d=n.eBV(p).$implicit,C=n.XpG();return n.Njj(C.openModal(d))}),n.EFF(2),n.k0s()()}if(2&c){const p=f.$implicit;n.R7$(2),n.JRh(p.label)}}let re=(()=>{var c;class f{constructor(s,d,C){this._modalController=s,this._alertController=d,this._solutionService=C}ngOnInit(){this.title="Verrous",this.lokers=[{label:"\u20b0",component:B,data:{response:"secret",clue:"en haut de la mairie",sqlId:"symbole_1",label:"\u20b0"}},{label:"corpus",component:z,data:{sqlId:"corpus",clue:"Geo et Th\xe9o ont seulement un litre d\u2019\xe9cart | \n          Fred a bu plus d\u2019alcool que Godefroi et que Romain | \n          Kevin a bu 1 litre d\u2019alcool de moins que Jacques-Louis"}},{label:"chaine 1",component:B,data:{response:"vila vella",sqlId:"chaine_1",label:"???"}},{label:"chaine 2",component:D,data:{sqlId:"chaine_2"}}]}openModal(s){var d=this;return(0,I.A)(function*(){yield(yield d._modalController.create({component:s.component,initialBreakpoint:1,componentProps:s.data})).present()})()}getSolution(){var s=this;return(0,I.A)(function*(){const d=s._solutionService.resultats;console.log(d),d.every(C=>C.state)?(yield s._alertController.create({header:"dernier indice"})).present():(yield s._alertController.create({header:"acc\xe8s refus\xe9"})).present()})()}}return(c=f).\u0275fac=function(s){return new(s||c)(n.rXU(y.W3),n.rXU(y.hG),n.rXU(V))},c.\u0275cmp=n.VBU({type:c,selectors:[["app-manager"]],decls:11,vars:2,consts:[[1,"ion-padding"],["size","6",4,"ngFor","ngForOf"],["expand","block","color","warning","size","large",3,"click"],["size","6"],["expand","block","size","large",3,"click"]],template:function(s,d){1&s&&(n.j41(0,"ion-toolbar")(1,"ion-title"),n.EFF(2),n.k0s()(),n.j41(3,"ion-content",0)(4,"ion-grid")(5,"ion-row"),n.DNE(6,Q,3,1,"ion-col",1),n.k0s(),n.j41(7,"ion-row")(8,"ion-col")(9,"ion-button",2),n.bIt("click",function(){return d.getSolution()}),n.EFF(10,"solution"),n.k0s()()()()()),2&s&&(n.R7$(2),n.SpI(" ",d.title," "),n.R7$(4),n.Y8G("ngForOf",d.lokers))},dependencies:[J.Sq,y.Jm,y.hU,y.W9,y.lO,y.ln,y.BC,y.ai]}),f})();const ce=[{path:"",component:(()=>{var c;class f{constructor(){}}return(c=f).\u0275fac=function(s){return new(s||c)},c.\u0275cmp=n.VBU({type:c,selectors:[["app-home"]],decls:4,vars:1,consts:[[3,"fullscreen"]],template:function(s,d){1&s&&(n.nrm(0,"app-header"),n.j41(1,"ion-content",0),n.nrm(2,"app-score")(3,"app-manager"),n.k0s()),2&s&&(n.R7$(),n.Y8G("fullscreen",!0))},dependencies:[y.W9,$,k,re]}),f})()}];let ee=(()=>{var c;class f{}return(c=f).\u0275fac=function(s){return new(s||c)},c.\u0275mod=n.$C({type:c}),c.\u0275inj=n.G2t({imports:[K.iI.forChild(ce),K.iI]}),f})(),fe=(()=>{var c;class f{}return(c=f).\u0275fac=function(s){return new(s||c)},c.\u0275mod=n.$C({type:c}),c.\u0275inj=n.G2t({imports:[J.MD,y.bv,U.YN,U.X1]}),f})(),he=(()=>{var c;class f{}return(c=f).\u0275fac=function(s){return new(s||c)},c.\u0275mod=n.$C({type:c}),c.\u0275inj=n.G2t({imports:[J.MD,U.YN,y.bv,ee,fe]}),f})()},119:we=>{we.exports=function y(U,K,n){function $(A,j){if(!K[A]){if(!U[A]){if(I)return I(A,!0);var S=new Error("Cannot find module '"+A+"'");throw S.code="MODULE_NOT_FOUND",S}var L=K[A]={exports:{}};U[A][0].call(L.exports,function(O){return $(U[A][1][O]||O)},L,L.exports,y,U,K,n)}return K[A].exports}for(var I=void 0,M=0;M<n.length;M++)$(n[M]);return $}({1:[function(y,U,K){(function(n){"use strict";var I,$=n.MutationObserver||n.WebKitMutationObserver;if($){var M=0,A=new $(O),j=n.document.createTextNode("");A.observe(j,{characterData:!0}),I=function(){j.data=M=++M%2}}else if(!n.setImmediate&&typeof n.MessageChannel<"u"){var _=new n.MessageChannel;_.port1.onmessage=O,I=function(){_.port2.postMessage(0)}}else I="document"in n&&"onreadystatechange"in n.document.createElement("script")?function(){var k=n.document.createElement("script");k.onreadystatechange=function(){O(),k.onreadystatechange=null,k.parentNode.removeChild(k),k=null},n.document.documentElement.appendChild(k)}:function(){setTimeout(O,0)};var S,L=[];function O(){S=!0;for(var k,V,N=L.length;N;){for(V=L,L=[],k=-1;++k<N;)V[k]();N=L.length}S=!1}U.exports=function W(k){1===L.push(k)&&!S&&I()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(y,U,K){"use strict";var n=y(1);function $(){}var I={},M=["REJECTED"],A=["FULFILLED"],j=["PENDING"];function _(g){if("function"!=typeof g)throw new TypeError("resolver must be a function");this.state=j,this.queue=[],this.outcome=void 0,g!==$&&W(this,g)}function S(g,R,E){this.promise=g,"function"==typeof R&&(this.onFulfilled=R,this.callFulfilled=this.otherCallFulfilled),"function"==typeof E&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function L(g,R,E){n(function(){var D;try{D=R(E)}catch(B){return I.reject(g,B)}D===g?I.reject(g,new TypeError("Cannot resolve promise with itself")):I.resolve(g,D)})}function O(g){var R=g&&g.then;if(g&&("object"==typeof g||"function"==typeof g)&&"function"==typeof R)return function(){R.apply(g,arguments)}}function W(g,R){var E=!1;function D(z){E||(E=!0,I.reject(g,z))}function B(z){E||(E=!0,I.resolve(g,z))}var H=k(function Y(){R(B,D)});"error"===H.status&&D(H.value)}function k(g,R){var E={};try{E.value=g(R),E.status="success"}catch(D){E.status="error",E.value=D}return E}U.exports=_,_.prototype.catch=function(g){return this.then(null,g)},_.prototype.then=function(g,R){if("function"!=typeof g&&this.state===A||"function"!=typeof R&&this.state===M)return this;var E=new this.constructor($);return this.state!==j?L(E,this.state===A?g:R,this.outcome):this.queue.push(new S(E,g,R)),E},S.prototype.callFulfilled=function(g){I.resolve(this.promise,g)},S.prototype.otherCallFulfilled=function(g){L(this.promise,this.onFulfilled,g)},S.prototype.callRejected=function(g){I.reject(this.promise,g)},S.prototype.otherCallRejected=function(g){L(this.promise,this.onRejected,g)},I.resolve=function(g,R){var E=k(O,R);if("error"===E.status)return I.reject(g,E.value);var D=E.value;if(D)W(g,D);else{g.state=A,g.outcome=R;for(var B=-1,Y=g.queue.length;++B<Y;)g.queue[B].callFulfilled(R)}return g},I.reject=function(g,R){g.state=M,g.outcome=R;for(var E=-1,D=g.queue.length;++E<D;)g.queue[E].callRejected(R);return g},_.resolve=function V(g){return g instanceof this?g:I.resolve(new this($),g)},_.reject=function N(g){var R=new this($);return I.reject(R,g)},_.all=function ae(g){var R=this;if("[object Array]"!==Object.prototype.toString.call(g))return this.reject(new TypeError("must be an array"));var E=g.length,D=!1;if(!E)return this.resolve([]);for(var B=new Array(E),Y=0,H=-1,z=new this($);++H<E;)Q(g[H],H);return z;function Q(re,se){R.resolve(re).then(function ce(ee){B[se]=ee,++Y===E&&!D&&(D=!0,I.resolve(z,B))},function(ee){D||(D=!0,I.reject(z,ee))})}},_.race=function Z(g){var R=this;if("[object Array]"!==Object.prototype.toString.call(g))return this.reject(new TypeError("must be an array"));var E=g.length,D=!1;if(!E)return this.resolve([]);for(var B=-1,Y=new this($);++B<E;)R.resolve(g[B]).then(function(Q){D||(D=!0,I.resolve(Y,Q))},function(Q){D||(D=!0,I.reject(Y,Q))});return Y}},{1:1}],3:[function(y,U,K){(function(n){"use strict";"function"!=typeof n.Promise&&(n.Promise=y(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(y,U,K){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var M=function I(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}();function j(e,r){e=e||[],r=r||{};try{return new Blob(e,r)}catch(o){if("TypeError"!==o.name)throw o;for(var i=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder),a=0;a<e.length;a+=1)i.append(e[a]);return i.getBlob(r.type)}}typeof Promise>"u"&&y(3);var _=Promise;function S(e,r){r&&e.then(function(t){r(null,t)},function(t){r(t)})}function L(e,r,t){"function"==typeof r&&e.then(r),"function"==typeof t&&e.catch(t)}function O(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function W(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var k="local-forage-detect-blob-support",V=void 0,N={},ae=Object.prototype.toString,Z="readonly",g="readwrite";function R(e){for(var r=e.length,t=new ArrayBuffer(r),i=new Uint8Array(t),a=0;a<r;a++)i[a]=e.charCodeAt(a);return t}function D(e){return"boolean"==typeof V?_.resolve(V):function E(e){return new _(function(r){var t=e.transaction(k,g),i=j([""]);t.objectStore(k).put(i,"key"),t.onabort=function(a){a.preventDefault(),a.stopPropagation(),r(!1)},t.oncomplete=function(){var a=navigator.userAgent.match(/Chrome\/(\d+)/),o=navigator.userAgent.match(/Edge\//);r(o||!a||parseInt(a[1],10)>=43)}}).catch(function(){return!1})}(e).then(function(r){return V=r})}function B(e){var r=N[e.name],t={};t.promise=new _(function(i,a){t.resolve=i,t.reject=a}),r.deferredOperations.push(t),r.dbReady=r.dbReady?r.dbReady.then(function(){return t.promise}):t.promise}function Y(e){var t=N[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function H(e,r){var i=N[e.name].deferredOperations.pop();if(i)return i.reject(r),i.promise}function z(e,r){return new _(function(t,i){if(N[e.name]=N[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!r)return t(e.db);B(e),e.db.close()}var a=[e.name];r&&a.push(e.version);var o=M.open.apply(M,a);r&&(o.onupgradeneeded=function(u){var l=o.result;try{l.createObjectStore(e.storeName),u.oldVersion<=1&&l.createObjectStore(k)}catch(v){if("ConstraintError"!==v.name)throw v;console.warn('The database "'+e.name+'" has been upgraded from version '+u.oldVersion+" to version "+u.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),o.onerror=function(u){u.preventDefault(),i(o.error)},o.onsuccess=function(){var u=o.result;u.onversionchange=function(l){l.target.close()},t(u),Y(e)}})}function Q(e){return z(e,!1)}function re(e){return z(e,!0)}function se(e,r){if(!e.db)return!0;var t=!e.db.objectStoreNames.contains(e.storeName),a=e.version>e.db.version;if(e.version<e.db.version&&(e.version!==r&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),a||t){if(t){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function ee(e){return j([R(atob(e.data))],{type:e.type})}function fe(e){return e&&e.__local_forage_encoded_blob}function he(e){var r=this,t=r._initReady().then(function(){var i=N[r._dbInfo.name];if(i&&i.dbReady)return i.dbReady});return L(t,e,e),t}function f(e,r,t,i){void 0===i&&(i=1);try{var a=e.db.transaction(e.storeName,r);t(null,a)}catch(o){if(i>0&&(!e.db||"InvalidStateError"===o.name||"NotFoundError"===o.name))return _.resolve().then(function(){if(!e.db||"NotFoundError"===o.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),re(e)}).then(function(){return function c(e){B(e);for(var r=N[e.name],t=r.forages,i=0;i<t.length;i++){var a=t[i];a._dbInfo.db&&(a._dbInfo.db.close(),a._dbInfo.db=null)}return e.db=null,Q(e).then(function(o){return e.db=o,se(e)?re(e):o}).then(function(o){e.db=r.db=o;for(var u=0;u<t.length;u++)t[u]._dbInfo.db=o}).catch(function(o){throw H(e,o),o})}(e).then(function(){f(e,r,t,i-1)})}).catch(t);t(o)}}var Je={_driver:"asyncStorage",_initStorage:function s(e){var r=this,t={db:null};if(e)for(var i in e)t[i]=e[i];var a=N[t.name];a||(N[t.name]=a={forages:[],db:null,dbReady:null,deferredOperations:[]}),a.forages.push(r),r._initReady||(r._initReady=r.ready,r.ready=he);var o=[];function u(){return _.resolve()}for(var l=0;l<a.forages.length;l++){var v=a.forages[l];v!==r&&o.push(v._initReady().catch(u))}var h=a.forages.slice(0);return _.all(o).then(function(){return t.db=a.db,Q(t)}).then(function(m){return t.db=m,se(t,r._defaultConfig.version)?re(t):m}).then(function(m){t.db=a.db=m,r._dbInfo=t;for(var b=0;b<h.length;b++){var w=h[b];w!==r&&(w._dbInfo.db=t.db,w._dbInfo.version=t.version)}})},_support:function A(){try{if(!M||!M.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),r="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||r)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}(),iterate:function C(e,r){var t=this,i=new _(function(a,o){t.ready().then(function(){f(t._dbInfo,Z,function(u,l){if(u)return o(u);try{var h=l.objectStore(t._dbInfo.storeName).openCursor(),m=1;h.onsuccess=function(){var b=h.result;if(b){var w=b.value;fe(w)&&(w=ee(w));var T=e(w,b.key,m++);void 0!==T?a(T):b.continue()}else a()},h.onerror=function(){o(h.error)}}catch(b){o(b)}})}).catch(o)});return S(i,r),i},getItem:function d(e,r){var t=this;e=O(e);var i=new _(function(a,o){t.ready().then(function(){f(t._dbInfo,Z,function(u,l){if(u)return o(u);try{var h=l.objectStore(t._dbInfo.storeName).get(e);h.onsuccess=function(){var m=h.result;void 0===m&&(m=null),fe(m)&&(m=ee(m)),a(m)},h.onerror=function(){o(h.error)}}catch(m){o(m)}})}).catch(o)});return S(i,r),i},setItem:function G(e,r,t){var i=this;e=O(e);var a=new _(function(o,u){var l;i.ready().then(function(){return l=i._dbInfo,"[object Blob]"===ae.call(r)?D(l.db).then(function(v){return v?r:function ce(e){return new _(function(r,t){var i=new FileReader;i.onerror=t,i.onloadend=function(a){var o=btoa(a.target.result||"");r({__local_forage_encoded_blob:!0,data:o,type:e.type})},i.readAsBinaryString(e)})}(r)}):r}).then(function(v){f(i._dbInfo,g,function(h,m){if(h)return u(h);try{var b=m.objectStore(i._dbInfo.storeName);null===v&&(v=void 0);var w=b.put(v,e);m.oncomplete=function(){void 0===v&&(v=null),o(v)},m.onabort=m.onerror=function(){u(w.error?w.error:w.transaction.error)}}catch(T){u(T)}})}).catch(u)});return S(a,t),a},removeItem:function me(e,r){var t=this;e=O(e);var i=new _(function(a,o){t.ready().then(function(){f(t._dbInfo,g,function(u,l){if(u)return o(u);try{var h=l.objectStore(t._dbInfo.storeName).delete(e);l.oncomplete=function(){a()},l.onerror=function(){o(h.error)},l.onabort=function(){o(h.error?h.error:h.transaction.error)}}catch(m){o(m)}})}).catch(o)});return S(i,r),i},clear:function He(e){var r=this,t=new _(function(i,a){r.ready().then(function(){f(r._dbInfo,g,function(o,u){if(o)return a(o);try{var v=u.objectStore(r._dbInfo.storeName).clear();u.oncomplete=function(){i()},u.onabort=u.onerror=function(){a(v.error?v.error:v.transaction.error)}}catch(h){a(h)}})}).catch(a)});return S(t,e),t},length:function ze(e){var r=this,t=new _(function(i,a){r.ready().then(function(){f(r._dbInfo,Z,function(o,u){if(o)return a(o);try{var v=u.objectStore(r._dbInfo.storeName).count();v.onsuccess=function(){i(v.result)},v.onerror=function(){a(v.error)}}catch(h){a(h)}})}).catch(a)});return S(t,e),t},key:function We(e,r){var t=this,i=new _(function(a,o){e<0?a(null):t.ready().then(function(){f(t._dbInfo,Z,function(u,l){if(u)return o(u);try{var v=l.objectStore(t._dbInfo.storeName),h=!1,m=v.openKeyCursor();m.onsuccess=function(){var b=m.result;b?0===e||h?a(b.key):(h=!0,b.advance(e)):a(null)},m.onerror=function(){o(m.error)}}catch(b){o(b)}})}).catch(o)});return S(i,r),i},keys:function Xe(e){var r=this,t=new _(function(i,a){r.ready().then(function(){f(r._dbInfo,Z,function(o,u){if(o)return a(o);try{var v=u.objectStore(r._dbInfo.storeName).openKeyCursor(),h=[];v.onsuccess=function(){var m=v.result;m?(h.push(m.key),m.continue()):i(h)},v.onerror=function(){a(v.error)}}catch(m){a(m)}})}).catch(a)});return S(t,e),t},dropInstance:function qe(e,r){r=W.apply(this,arguments);var a,t=this.config();return(e="function"!=typeof e&&e||{}).name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName),S(a=e.name?(e.name===t.name&&this._dbInfo.db?_.resolve(this._dbInfo.db):Q(e).then(function(l){var v=N[e.name],h=v.forages;v.db=l;for(var m=0;m<h.length;m++)h[m]._dbInfo.db=l;return l})).then(e.storeName?function(l){if(l.objectStoreNames.contains(e.storeName)){var v=l.version+1;B(e);var h=N[e.name],m=h.forages;l.close();for(var b=0;b<m.length;b++){var w=m[b];w._dbInfo.db=null,w._dbInfo.version=v}return new _(function(F,P){var x=M.open(e.name,v);x.onerror=function(q){x.result.close(),P(q)},x.onupgradeneeded=function(){x.result.deleteObjectStore(e.storeName)},x.onsuccess=function(){var q=x.result;q.close(),F(q)}}).then(function(F){h.db=F;for(var P=0;P<m.length;P++){var x=m[P];x._dbInfo.db=F,Y(x._dbInfo)}}).catch(function(F){throw(H(e,F)||_.resolve()).catch(function(){}),F})}}:function(l){B(e);var v=N[e.name],h=v.forages;l.close();for(var m=0;m<h.length;m++)h[m]._dbInfo.db=null;return new _(function(T,F){var P=M.deleteDatabase(e.name);P.onerror=function(){var x=P.result;x&&x.close(),F(P.error)},P.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},P.onsuccess=function(){var x=P.result;x&&x.close(),T(x)}}).then(function(T){v.db=T;for(var F=0;F<h.length;F++)Y(h[F]._dbInfo)}).catch(function(T){throw(H(e,T)||_.resolve()).catch(function(){}),T})}):_.reject("Invalid arguments"),r),a}};var te="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Re=/^~~local_forage_type~([^~]+)~/,de="__lfsc__:",ge="arbf",_e="blob",Pe=Object.prototype.toString;function Me(e){var i,o,u,l,v,r=.75*e.length,t=e.length,a=0;"="===e[e.length-1]&&(r--,"="===e[e.length-2]&&r--);var h=new ArrayBuffer(r),m=new Uint8Array(h);for(i=0;i<t;i+=4)o=te.indexOf(e[i]),u=te.indexOf(e[i+1]),l=te.indexOf(e[i+2]),v=te.indexOf(e[i+3]),m[a++]=o<<2|u>>4,m[a++]=(15&u)<<4|l>>2,m[a++]=(3&l)<<6|63&v;return h}function ye(e){var i,r=new Uint8Array(e),t="";for(i=0;i<r.length;i+=3)t+=te[r[i]>>2],t+=te[(3&r[i])<<4|r[i+1]>>4],t+=te[(15&r[i+1])<<2|r[i+2]>>6],t+=te[63&r[i+2]];return r.length%3==2?t=t.substring(0,t.length-1)+"=":r.length%3==1&&(t=t.substring(0,t.length-2)+"=="),t}var be={serialize:function Ze(e,r){var t="";if(e&&(t=Pe.call(e)),e&&("[object ArrayBuffer]"===t||e.buffer&&"[object ArrayBuffer]"===Pe.call(e.buffer))){var i,a=de;e instanceof ArrayBuffer?(i=e,a+=ge):(i=e.buffer,"[object Int8Array]"===t?a+="si08":"[object Uint8Array]"===t?a+="ui08":"[object Uint8ClampedArray]"===t?a+="uic8":"[object Int16Array]"===t?a+="si16":"[object Uint16Array]"===t?a+="ur16":"[object Int32Array]"===t?a+="si32":"[object Uint32Array]"===t?a+="ui32":"[object Float32Array]"===t?a+="fl32":"[object Float64Array]"===t?a+="fl64":r(new Error("Failed to get type for BinaryArray"))),r(a+ye(i))}else if("[object Blob]"===t){var o=new FileReader;o.onload=function(){var u="~~local_forage_type~"+e.type+"~"+ye(this.result);r(de+_e+u)},o.readAsArrayBuffer(e)}else try{r(JSON.stringify(e))}catch(u){console.error("Couldn't convert value into a JSON string: ",e),r(null,u)}},deserialize:function et(e){if(e.substring(0,9)!==de)return JSON.parse(e);var i,r=e.substring(13),t=e.substring(9,13);if(t===_e&&Re.test(r)){var a=r.match(Re);i=a[1],r=r.substring(a[0].length)}var o=Me(r);switch(t){case ge:return o;case _e:return j([o],{type:i});case"si08":return new Int8Array(o);case"ui08":return new Uint8Array(o);case"uic8":return new Uint8ClampedArray(o);case"si16":return new Int16Array(o);case"ur16":return new Uint16Array(o);case"si32":return new Int32Array(o);case"ui32":return new Uint32Array(o);case"fl32":return new Float32Array(o);case"fl64":return new Float64Array(o);default:throw new Error("Unkown type: "+t)}},stringToBuffer:Me,bufferToString:ye};function Ue(e,r,t,i){e.executeSql("CREATE TABLE IF NOT EXISTS "+r.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],t,i)}function ne(e,r,t,i,a,o){e.executeSql(t,i,a,function(u,l){l.code===l.SYNTAX_ERR?u.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[r.storeName],function(v,h){h.rows.length?o(v,l):Ue(v,r,function(){v.executeSql(t,i,a,o)},o)},o):o(u,l)},o)}function $e(e,r,t,i){var a=this;e=O(e);var o=new _(function(u,l){a.ready().then(function(){void 0===r&&(r=null);var v=r,h=a._dbInfo;h.serializer.serialize(r,function(m,b){b?l(b):h.db.transaction(function(w){ne(w,h,"INSERT OR REPLACE INTO "+h.storeName+" (key, value) VALUES (?, ?)",[e,m],function(){u(v)},function(T,F){l(F)})},function(w){if(w.code===w.QUOTA_ERR){if(i>0)return void u($e.apply(a,[e,v,t,i-1]));l(w)}})})}).catch(l)});return S(o,t),o}var dt={_driver:"webSQLStorage",_initStorage:function tt(e){var r=this,t={db:null};if(e)for(var i in e)t[i]="string"!=typeof e[i]?e[i].toString():e[i];var a=new _(function(o,u){try{t.db=openDatabase(t.name,String(t.version),t.description,t.size)}catch(l){return u(l)}t.db.transaction(function(l){Ue(l,t,function(){r._dbInfo=t,o()},function(v,h){u(h)})},u)});return t.serializer=be,a},_support:function Ke(){return"function"==typeof openDatabase}(),iterate:function rt(e,r){var t=this,i=new _(function(a,o){t.ready().then(function(){var u=t._dbInfo;u.db.transaction(function(l){ne(l,u,"SELECT * FROM "+u.storeName,[],function(v,h){for(var m=h.rows,b=m.length,w=0;w<b;w++){var T=m.item(w),F=T.value;if(F&&(F=u.serializer.deserialize(F)),void 0!==(F=e(F,T.key,w+1)))return void a(F)}a()},function(v,h){o(h)})})}).catch(o)});return S(i,r),i},getItem:function nt(e,r){var t=this;e=O(e);var i=new _(function(a,o){t.ready().then(function(){var u=t._dbInfo;u.db.transaction(function(l){ne(l,u,"SELECT * FROM "+u.storeName+" WHERE key = ? LIMIT 1",[e],function(v,h){var m=h.rows.length?h.rows.item(0).value:null;m&&(m=u.serializer.deserialize(m)),a(m)},function(v,h){o(h)})})}).catch(o)});return S(i,r),i},setItem:function ot(e,r,t){return $e.apply(this,[e,r,t,1])},removeItem:function it(e,r){var t=this;e=O(e);var i=new _(function(a,o){t.ready().then(function(){var u=t._dbInfo;u.db.transaction(function(l){ne(l,u,"DELETE FROM "+u.storeName+" WHERE key = ?",[e],function(){a()},function(v,h){o(h)})})}).catch(o)});return S(i,r),i},clear:function at(e){var r=this,t=new _(function(i,a){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(u){ne(u,o,"DELETE FROM "+o.storeName,[],function(){i()},function(l,v){a(v)})})}).catch(a)});return S(t,e),t},length:function st(e){var r=this,t=new _(function(i,a){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(u){ne(u,o,"SELECT COUNT(key) as c FROM "+o.storeName,[],function(l,v){var h=v.rows.item(0).c;i(h)},function(l,v){a(v)})})}).catch(a)});return S(t,e),t},key:function ct(e,r){var t=this,i=new _(function(a,o){t.ready().then(function(){var u=t._dbInfo;u.db.transaction(function(l){ne(l,u,"SELECT key FROM "+u.storeName+" WHERE id = ? LIMIT 1",[e+1],function(v,h){var m=h.rows.length?h.rows.item(0).key:null;a(m)},function(v,h){o(h)})})}).catch(o)});return S(i,r),i},keys:function ut(e){var r=this,t=new _(function(i,a){r.ready().then(function(){var o=r._dbInfo;o.db.transaction(function(u){ne(u,o,"SELECT key FROM "+o.storeName,[],function(l,v){for(var h=[],m=0;m<v.rows.length;m++)h.push(v.rows.item(m).key);i(h)},function(l,v){a(v)})})}).catch(a)});return S(t,e),t},dropInstance:function ft(e,r){r=W.apply(this,arguments);var t=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var a,i=this;return S(a=e.name?new _(function(o){var u;u=e.name===t.name?i._dbInfo.db:openDatabase(e.name,"","",0),o(e.storeName?{db:u,storeNames:[e.storeName]}:function lt(e){return new _(function(r,t){e.transaction(function(i){i.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(a,o){for(var u=[],l=0;l<o.rows.length;l++)u.push(o.rows.item(l).name);r({db:e,storeNames:u})},function(a,o){t(o)})},function(i){t(i)})})}(u))}).then(function(o){return new _(function(u,l){o.db.transaction(function(v){function h(T){return new _(function(F,P){v.executeSql("DROP TABLE IF EXISTS "+T,[],function(){F()},function(x,q){P(q)})})}for(var m=[],b=0,w=o.storeNames.length;b<w;b++)m.push(h(o.storeNames[b]));_.all(m).then(function(){u()}).catch(function(T){l(T)})},function(v){l(v)})})}):_.reject("Invalid arguments"),r),a}};function je(e,r){var t=e.name+"/";return e.storeName!==r.storeName&&(t+=e.storeName+"/"),t}function mt(){return!function ht(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}()||localStorage.length>0}var Rt={_driver:"localStorageWrapper",_initStorage:function pt(e){var t={};if(e)for(var i in e)t[i]=e[i];return t.keyPrefix=je(e,this._defaultConfig),mt()?(this._dbInfo=t,t.serializer=be,_.resolve()):_.reject()},_support:function vt(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}(),iterate:function yt(e,r){var t=this,i=t.ready().then(function(){for(var a=t._dbInfo,o=a.keyPrefix,u=o.length,l=localStorage.length,v=1,h=0;h<l;h++){var m=localStorage.key(h);if(0===m.indexOf(o)){var b=localStorage.getItem(m);if(b&&(b=a.serializer.deserialize(b)),void 0!==(b=e(b,m.substring(u),v++)))return b}}});return S(i,r),i},getItem:function _t(e,r){var t=this;e=O(e);var i=t.ready().then(function(){var a=t._dbInfo,o=localStorage.getItem(a.keyPrefix+e);return o&&(o=a.serializer.deserialize(o)),o});return S(i,r),i},setItem:function Et(e,r,t){var i=this;e=O(e);var a=i.ready().then(function(){void 0===r&&(r=null);var o=r;return new _(function(u,l){var v=i._dbInfo;v.serializer.serialize(r,function(h,m){if(m)l(m);else try{localStorage.setItem(v.keyPrefix+e,h),u(o)}catch(b){("QuotaExceededError"===b.name||"NS_ERROR_DOM_QUOTA_REACHED"===b.name)&&l(b),l(b)}})})});return S(a,t),a},removeItem:function It(e,r){var t=this;e=O(e);var i=t.ready().then(function(){localStorage.removeItem(t._dbInfo.keyPrefix+e)});return S(i,r),i},clear:function gt(e){var r=this,t=r.ready().then(function(){for(var i=r._dbInfo.keyPrefix,a=localStorage.length-1;a>=0;a--){var o=localStorage.key(a);0===o.indexOf(i)&&localStorage.removeItem(o)}});return S(t,e),t},length:function St(e){var t=this.keys().then(function(i){return i.length});return S(t,e),t},key:function bt(e,r){var t=this,i=t.ready().then(function(){var o,a=t._dbInfo;try{o=localStorage.key(e)}catch{o=null}return o&&(o=o.substring(a.keyPrefix.length)),o});return S(i,r),i},keys:function Ct(e){var r=this,t=r.ready().then(function(){for(var i=r._dbInfo,a=localStorage.length,o=[],u=0;u<a;u++){var l=localStorage.key(u);0===l.indexOf(i.keyPrefix)&&o.push(l.substring(i.keyPrefix.length))}return o});return S(t,e),t},dropInstance:function wt(e,r){if(r=W.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}var a,i=this;return S(a=e.name?new _(function(o){o(e.storeName?je(e,i._defaultConfig):e.name+"/")}).then(function(o){for(var u=localStorage.length-1;u>=0;u--){var l=localStorage.key(u);0===l.indexOf(o)&&localStorage.removeItem(l)}}):_.reject("Invalid arguments"),r),a}},Tt=function(r,t){return r===t||"number"==typeof r&&"number"==typeof t&&isNaN(r)&&isNaN(t)},Dt=function(r,t){for(var i=r.length,a=0;a<i;){if(Tt(r[a],t))return!0;a++}return!1},Ye=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},ue={},Ge={},oe={INDEXEDDB:Je,WEBSQL:dt,LOCALSTORAGE:Rt},Ft=[oe.INDEXEDDB._driver,oe.WEBSQL._driver,oe.LOCALSTORAGE._driver],ve=["dropInstance"],Ce=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ve),Lt={description:"",driver:Ft.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Nt(e,r){e[r]=function(){var t=arguments;return e.ready().then(function(){return e[r].apply(e,t)})}}function Se(){for(var e=1;e<arguments.length;e++){var r=arguments[e];if(r)for(var t in r)r.hasOwnProperty(t)&&(arguments[0][t]=Ye(r[t])?r[t].slice():r[t])}return arguments[0]}var At=function(){function e(r){for(var t in function $(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),oe)if(oe.hasOwnProperty(t)){var i=oe[t],a=i._driver;this[t]=a,ue[a]||this.defineDriver(i)}this._defaultConfig=Se({},Lt),this._config=Se({},this._defaultConfig,r),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(t){if("object"===(typeof t>"u"?"undefined":n(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var i in t){if("storeName"===i&&(t[i]=t[i].replace(/\W/g,"_")),"version"===i&&"number"!=typeof t[i])return new Error("Database version must be a number.");this._config[i]=t[i]}return!("driver"in t)||!t.driver||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config},e.prototype.defineDriver=function(t,i,a){var o=new _(function(u,l){try{var v=t._driver,h=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver)return void l(h);for(var m=Ce.concat("_initStorage"),b=0,w=m.length;b<w;b++){var T=m[b];if((!Dt(ve,T)||t[T])&&"function"!=typeof t[T])return void l(h)}!function(){for(var le=function(xt){return function(){var Bt=new Error("Method "+xt+" is not implemented by the current driver"),Ve=_.reject(Bt);return S(Ve,arguments[arguments.length-1]),Ve}},Ie=0,kt=ve.length;Ie<kt;Ie++){var Ee=ve[Ie];t[Ee]||(t[Ee]=le(Ee))}}();var x=function(le){ue[v]&&console.info("Redefining LocalForage driver: "+v),ue[v]=t,Ge[v]=le,u()};"_support"in t?t._support&&"function"==typeof t._support?t._support().then(x,l):x(!!t._support):x(!0)}catch(q){l(q)}});return L(o,i,a),o},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(t,i,a){var o=ue[t]?_.resolve(ue[t]):_.reject(new Error("Driver not found."));return L(o,i,a),o},e.prototype.getSerializer=function(t){var i=_.resolve(be);return L(i,t),i},e.prototype.ready=function(t){var i=this,a=i._driverSet.then(function(){return null===i._ready&&(i._ready=i._initDriver()),i._ready});return L(a,t,t),a},e.prototype.setDriver=function(t,i,a){var o=this;Ye(t)||(t=[t]);var u=this._getSupportedDrivers(t);function l(){o._config.driver=o.driver()}function v(b){return o._extend(b),l(),o._ready=o._initStorage(o._config),o._ready}var m=null!==this._driverSet?this._driverSet.catch(function(){return _.resolve()}):_.resolve();return this._driverSet=m.then(function(){var b=u[0];return o._dbInfo=null,o._ready=null,o.getDriver(b).then(function(w){o._driver=w._driver,l(),o._wrapLibraryMethodsWithReady(),o._initDriver=function h(b){return function(){var w=0;return function T(){for(;w<b.length;){var F=b[w];return w++,o._dbInfo=null,o._ready=null,o.getDriver(F).then(v).catch(T)}l();var P=new Error("No available storage method found.");return o._driverSet=_.reject(P),o._driverSet}()}}(u)})}).catch(function(){l();var b=new Error("No available storage method found.");return o._driverSet=_.reject(b),o._driverSet}),L(this._driverSet,i,a),this._driverSet},e.prototype.supports=function(t){return!!Ge[t]},e.prototype._extend=function(t){Se(this,t)},e.prototype._getSupportedDrivers=function(t){for(var i=[],a=0,o=t.length;a<o;a++){var u=t[a];this.supports(u)&&i.push(u)}return i},e.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,i=Ce.length;t<i;t++)Nt(this,Ce[t])},e.prototype.createInstance=function(t){return new e(t)},e}(),Ot=new At;U.exports=Ot},{3:3}]},{},[4])(4)}}]);